!function s(n,o,a){function l(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(i)return i(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},n[t][0].call(r.exports,function(e){return l(n[t][1][e]||e)},r,r.exports,s,n,o,a)}return o[t].exports}for(var i="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,r){let s=e("./js/filters");e=()=>{s()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()},{"./js/filters":2}],2:[function(e,t,r){var d=[];function c(e){var s,n,o,e=new FormData(e),t=new URLSearchParams(e).toString();{var r,a,l,t,e,i,c,u,c,e;(sessionStorage.setItem("sciwbLastsearch",t),t=e,$("#nowbs").addClass("no-display"),s=[],n=$("<ul/>",{class:"filter-pills__list"}),o=[],t.forEach((e,t)=>{var r;""!==e&&(t.includes("inclusive")?o.push(e):t.includes("selector")||(r="","subject"==t?(r="subject",o.push(e)):r=t,Reflect.has(s,r)?(Array.isArray(s[r])||(s[r]=[s[r]]),n.append(h(t,e)),s[r].push(e)):(n.append(h(t,e)),s[r]=e)))}),0===(t=Object.entries(s)).length)?p():(e=t,r=o,t=Object.fromEntries(e.filter(([e])=>r.includes(e))),e=Object.fromEntries(e.filter(([e])=>!r.includes(e))),i=s=>r=>Object.keys(s).every(e=>{return Array.isArray(s[e])&&(Array.isArray(r[e])&&(t=r[e],s[e].some(e=>t.includes(e)))||s[e].includes(r[e]))||r[e]===s[e]||Array.isArray(r[e])&&r[e].includes(s[e]);var t}),c=s=>r=>Object.keys(s).every(e=>{return Array.isArray(s[e])&&(Array.isArray(r[e])&&(t=r[e],s[e].every(e=>t.includes(e)))||s[e].includes(r[e]))||r[e]===s[e]||Array.isArray(r[e])&&r[e].includes(s[e]);var t}),u={},c=(u=(0===Object.keys(t).length?d:i=d.filter(i(t))).filter(c(e)),t=u.flatMap(function(e){return e.keeps}),i=u.flatMap(function(e){return e.ref}),t),e=i,0===c.length?($(".wb").addClass("no-display").removeClass("wb-select"),$("#search-placeholder").removeClass("no-display"),f(0)):(a=e,$(".wb").addClass("no-display").removeClass("wb-select"),$("#search-placeholder").removeClass("no-display"),l=0,c.forEach(e=>{var t=document.getElementById(e);t&&(t.classList.remove("no-display"),a.includes(e))&&(t.classList.add("wb-select"),l+=1)}),f(l)),u=n,(t=$("#filter-pills")).empty(),t.append(u))}}function o(e,t="nope"){var r,s,n=sessionStorage.getItem("sciwbLastsearch"),n=new URLSearchParams(n).entries(),o=e,a=t;for([r,s]of n)if((r!==a[0]||s!==a[1])&&""!==s){var l=o.elements[r];if(l.id===r)"checkbox"===l.type?l.checked=!!s:l.value=s;else if(l instanceof RadioNodeList){rlength=l.length;for(var i=0;i<rlength;i++)l[i].value===s&&(l[i].checked=!!s)}}c(e)}function p(){sessionStorage.clear(),location.reload()}function f(e){var t,r=$("#component-count");"json"==r.attr("path")?(t=1===e?"workbook":"workbooks",r.html(`<strong>${e}</strong> ${t} found`)):n(r)}function n(e){var t=1===(componentCount=document.querySelectorAll(".fc:not(.fc-no-display):not(.no-display)").length)?"workbook":"workbooks";e.html(`<strong>${componentCount}</strong> ${t} found`)}function h(e,t){var r=t,e=$("<li/>",{class:"filter-pills__item",keyID:e,value:t}).append($("<a/>",{class:"filter-pills__pill",title:r}).append($("<span/>",{class:"filter-pill-name",text:r})).append($("<span/>",{class:"filter-pills__remove"}).html('<span class="filter-pills__remove"><svg class="usa-icon" aria-hidden="true" focusable="false" role="img"><use xlink:href="/assets/uswds/img/sprite.svg#close"></use></svg></span>')));return e.bind("click",function(){{var n;let e=$(this),t=e.attr("keyID"),r=e.attr("value"),s=document.getElementById("workbook-array");s.reset(),o(s,[t,r])}}),e}t.exports=function(){var t,e,s=document.getElementById("workbook-array"),r=document.getElementById("clearsearch");t=s,e=window.location.origin,$.ajax({type:"GET",url:e+"/assets/js/filter/workbooks.json",data:{get_param:"value"},dataType:"json",success:function(e){d=e,"sciwbLastsearch"in sessionStorage?o(t):n($("#component-count"))},error:function(){console.log("Failed to fetch workbook filter data")}}),s.addEventListener("submit",function(e){e.preventDefault(),c(this)}),r.addEventListener("click",function(){p()}),$(".filter-toggle").prop("checked",!1).click(function(){var e=$(this).attr("toggles"),t=$(this);t.prop("checked")?t.text("Select All"):t.text("Deselect All"),t.prop("checked",!t.prop("checked")),$("."+e).prop("checked",this.checked)}),$(".selectmultiple").on("change",function(){var e,t=$("option:selected",this),r=this.value;r&&(e=t.attr("confirms"),t=t.attr("match"),(e=s.elements[e])[t].value===r)&&(e[t].checked=!!r)}),$(".inclusive-toggle").prop("checked",!1).click(function(){var e=$(this),t=$("#"+e.attr("value")+"-hint");e.prop("checked")?t.text("Results match tag 1 OR tag 2"):t.text("Results match tag 1 AND tag 2")}),$(".tooltip-toggle").click(function(){var e=$(this).attr("toggles");$("#"+e).toggleClass("no-display")})}},{}]},{},[1]);
//# sourceMappingURL=filters.js.map
